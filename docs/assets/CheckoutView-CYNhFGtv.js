import{_ as M,i as _,g as P,c as n,o as r,b as e,q as m,k as p,v as h,n as v,t as d,F as T,r as C,s as x,e as S,u as q,a as V,w as E,l as R,d as w,m as F,p as I}from"./index-CNK69vUn.js";const N={class:"form-section"},U={class:"form-group"},A={key:0,class:"form-error"},B={class:"form-group"},L={key:0,class:"form-error"},O={class:"form-group"},j={key:0,class:"form-error"},z={class:"form-section"},H={class:"option-group"},W=["value"],G={class:"option-content"},J={class:"option-label"},K={key:0,class:"option-description"},Q={class:"option-price"},X={key:0,class:"form-group"},Y={key:0,class:"form-error"},Z={class:"form-section"},D={class:"option-group"},ee=["value"],oe={class:"option-content"},se={class:"option-label"},te={class:"option-description"},ae=["disabled"],le={key:0},ne={key:1},re={__name:"CheckoutForm",props:{loading:{type:Boolean,default:!1}},emits:["submit"],setup(b,{emit:g}){const c=g,s=_({name:"",email:"",phone:"",address:"",deliveryType:"retiro",paymentMethod:"transferencia"}),t=_({}),y=[{value:"retiro",label:"Retiro en local (a coordinar)",price:0},{value:"envio",label:"Envío a domicilio",price:0,description:"Se coordina costo según zona"}],f=[{value:"transferencia",label:"Transferencia bancaria",description:"Te enviaremos los datos por WhatsApp"},{value:"efectivo",label:"Efectivo",description:"Al momento del retiro o entrega"}],k=P(()=>y.find(u=>u.value===s.value.deliveryType));function i(){return t.value={},s.value.name.trim()||(t.value.name="El nombre es requerido"),s.value.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.value.email)||(t.value.email="Ingresá un email válido"):t.value.email="El email es requerido",s.value.phone.trim()?/^[\d\s\-+()]{8,}$/.test(s.value.phone)||(t.value.phone="Ingresá un teléfono válido"):t.value.phone="El teléfono es requerido",s.value.deliveryType==="envio"&&!s.value.address.trim()&&(t.value.address="La dirección es requerida para envíos"),Object.keys(t.value).length===0}function l(){var u;i()&&c("submit",{...s.value,deliveryPrice:((u=k.value)==null?void 0:u.price)||0})}return(u,o)=>(r(),n("form",{class:"checkout-form",onSubmit:S(l,["prevent"])},[e("div",N,[o[9]||(o[9]=e("h3",{class:"section-title"},"Datos de contacto",-1)),e("div",U,[o[6]||(o[6]=e("label",{for:"name",class:"form-label"},"Nombre completo",-1)),m(e("input",{id:"name","onUpdate:modelValue":o[0]||(o[0]=a=>s.value.name=a),type:"text",class:v(["form-input",{"form-input--error":t.value.name}]),placeholder:"Tu nombre",autocomplete:"name"},null,2),[[h,s.value.name]]),t.value.name?(r(),n("span",A,d(t.value.name),1)):p("",!0)]),e("div",B,[o[7]||(o[7]=e("label",{for:"email",class:"form-label"},"Email",-1)),m(e("input",{id:"email","onUpdate:modelValue":o[1]||(o[1]=a=>s.value.email=a),type:"email",class:v(["form-input",{"form-input--error":t.value.email}]),placeholder:"tu@email.com",autocomplete:"email"},null,2),[[h,s.value.email]]),t.value.email?(r(),n("span",L,d(t.value.email),1)):p("",!0)]),e("div",O,[o[8]||(o[8]=e("label",{for:"phone",class:"form-label"},"Teléfono",-1)),m(e("input",{id:"phone","onUpdate:modelValue":o[2]||(o[2]=a=>s.value.phone=a),type:"tel",class:v(["form-input",{"form-input--error":t.value.phone}]),placeholder:"11 1234 5678",autocomplete:"tel"},null,2),[[h,s.value.phone]]),t.value.phone?(r(),n("span",j,d(t.value.phone),1)):p("",!0)])]),e("div",z,[o[12]||(o[12]=e("h3",{class:"section-title"},"Forma de entrega",-1)),e("div",H,[(r(),n(T,null,C(y,a=>e("label",{key:a.value,class:v(["option-card",{"option-card--selected":s.value.deliveryType===a.value}])},[m(e("input",{type:"radio",value:a.value,"onUpdate:modelValue":o[3]||(o[3]=$=>s.value.deliveryType=$),class:"option-radio"},null,8,W),[[x,s.value.deliveryType]]),e("div",G,[e("span",J,d(a.label),1),a.description?(r(),n("span",K,d(a.description),1)):p("",!0)]),e("span",Q,d(a.price===0?"Sin cargo":`$${a.price.toLocaleString("es-AR")}`),1)],2)),64))]),s.value.deliveryType==="envio"?(r(),n("div",X,[o[10]||(o[10]=e("label",{for:"address",class:"form-label"},"Dirección de envío",-1)),m(e("textarea",{id:"address","onUpdate:modelValue":o[4]||(o[4]=a=>s.value.address=a),class:v(["form-textarea",{"form-input--error":t.value.address}]),placeholder:"Calle, número, piso/depto, localidad, provincia",rows:"3"},null,2),[[h,s.value.address]]),t.value.address?(r(),n("span",Y,d(t.value.address),1)):p("",!0),o[11]||(o[11]=e("p",{class:"form-hint"},"Te contactaremos para coordinar el envío y confirmar el costo",-1))])):p("",!0)]),e("div",Z,[o[13]||(o[13]=e("h3",{class:"section-title"},"Método de pago",-1)),e("div",D,[(r(),n(T,null,C(f,a=>e("label",{key:a.value,class:v(["option-card",{"option-card--selected":s.value.paymentMethod===a.value}])},[m(e("input",{type:"radio",value:a.value,"onUpdate:modelValue":o[5]||(o[5]=$=>s.value.paymentMethod=$),class:"option-radio"},null,8,ee),[[x,s.value.paymentMethod]]),e("div",oe,[e("span",se,d(a.label),1),e("span",te,d(a.description),1)])],2)),64))])]),e("button",{type:"submit",class:"btn btn-primary submit-btn",disabled:b.loading},[b.loading?(r(),n("span",le,"Procesando pedido...")):(r(),n("span",ne,"Confirmar pedido"))],8,ae)],32))}},ie=M(re,[["__scopeId","data-v-9189e989"]]),de={class:"checkout-page"},ue={class:"container"},ce={key:0,class:"empty-state"},pe={key:1,class:"checkout-content"},me={class:"checkout-main"},ve={key:0,class:"error-message"},ye={class:"checkout-summary"},fe={class:"summary-items"},he=["src","alt"],_e={class:"item-info"},be={class:"item-name"},ge={class:"item-qty"},ke={class:"item-price"},$e={class:"summary-totals"},we={class:"summary-row"},Te={class:"summary-row total"},Ce={class:"total-value"},xe={__name:"CheckoutView",setup(b){const g=F(),c=q(),s=_(!1),t=_(null),y=P(()=>c.isEmpty);function f(i){return new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:0}).format(i)}async function k(i){if(!y.value){s.value=!0,t.value=null;try{const l={customer:{name:i.name,email:i.email,phone:i.phone,address:i.address||""},items:c.items.map(u=>({productId:u.id,name:u.name,quantity:u.quantity,price:u.price})),delivery:{type:i.deliveryType,price:i.deliveryPrice||0},payment:{method:i.paymentMethod},total:c.totalPrice+(i.deliveryPrice||0),status:"pendiente"};console.log("Pedido creado:",l),c.clearCart(),g.push({path:"/pedido-confirmado",query:{name:i.name,payment:i.paymentMethod,delivery:i.deliveryType}})}catch(l){console.error("Error en checkout:",l),t.value="Hubo un problema al procesar tu pedido. Por favor, intentá nuevamente."}finally{s.value=!1}}}return(i,l)=>{const u=R("RouterLink");return r(),n("div",de,[e("div",ue,[l[6]||(l[6]=e("h1",{class:"page-title"},"Checkout",-1)),y.value?(r(),n("div",ce,[l[1]||(l[1]=e("p",null,"Tu carrito está vacío",-1)),V(u,{to:"/",class:"btn btn-secondary"},{default:E(()=>[...l[0]||(l[0]=[I("Ver catálogo",-1)])]),_:1})])):(r(),n("div",pe,[e("div",me,[V(ie,{loading:s.value,onSubmit:k},null,8,["loading"]),t.value?(r(),n("div",ve,d(t.value),1)):p("",!0)]),e("aside",ye,[l[4]||(l[4]=e("h2",{class:"summary-title"},"Resumen del pedido",-1)),e("ul",fe,[(r(!0),n(T,null,C(w(c).items,o=>(r(),n("li",{key:o.id,class:"summary-item"},[e("img",{src:o.image,alt:o.name,class:"item-thumb"},null,8,he),e("div",_e,[e("span",be,d(o.name),1),e("span",ge,"Cantidad: "+d(o.quantity),1)]),e("span",ke,d(f(o.price*o.quantity)),1)]))),128))]),e("div",$e,[e("div",we,[l[2]||(l[2]=e("span",null,"Subtotal",-1)),e("span",null,d(f(w(c).totalPrice)),1)]),e("div",Te,[l[3]||(l[3]=e("span",null,"Total",-1)),e("span",Ce,d(f(w(c).totalPrice)),1)])]),l[5]||(l[5]=e("div",{class:"secure-badge"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),e("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]),e("span",null,"Pago seguro con Mercado Pago")],-1))])]))])])}}},Me=M(xe,[["__scopeId","data-v-a4f17792"]]);export{Me as default};
