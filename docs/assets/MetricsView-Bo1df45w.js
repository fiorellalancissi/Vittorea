import{_ as S,g as p,i as P,c as l,b as s,a as u,t as e,F as k,r as b,k as _,p as f,q as I,v as M,o as r,y as V}from"./index-CCxDqwPe.js";import{u as N}from"./admin-C1Rz6nae.js";import{_ as v}from"./Icon-DQRHlwUv.js";const z={class:"metrics-page"},G={class:"kpi-grid"},C={class:"kpi-card"},D={class:"kpi-icon"},A={class:"kpi-content"},B={class:"kpi-value"},F={class:"kpi-card kpi-card--profit"},T={class:"kpi-icon"},E={class:"kpi-content"},L={class:"kpi-value"},$={class:"kpi-badge"},j={class:"kpi-card"},q={class:"kpi-icon"},U={class:"kpi-content"},H={class:"kpi-value"},J={class:"kpi-card kpi-card--month"},K={class:"kpi-icon"},O={class:"kpi-content"},Q={class:"kpi-value"},W={class:"metrics-section"},X={class:"chart-container"},Y={class:"bar-chart"},Z={class:"bar-wrapper"},ss={class:"bar-value"},ts={class:"bar-label"},es={class:"bar-details"},as={class:"profit-text"},ns={class:"two-columns"},os={class:"metrics-section"},is={class:"ranking-cards"},ls={key:0,class:"ranking-card ranking-card--top"},rs={class:"ranking-badge"},ds={class:"ranking-product"},cs=["src"],us={class:"product-info"},vs={class:"product-name"},ps={class:"product-stats"},ms={class:"ranking-metrics"},_s={class:"metric"},hs={class:"metric-value"},gs={class:"metric"},ks={class:"metric-value profit-text"},bs={key:1,class:"ranking-card ranking-card--bottom"},fs={class:"ranking-badge"},ys={class:"ranking-product"},ws=["src"],Rs={class:"product-info"},xs={class:"product-name"},Ss={class:"product-stats"},Ps={class:"ranking-metrics"},Is={class:"metric"},Ms={class:"metric-value"},Vs={class:"metric"},Ns={class:"metric-value profit-text"},zs={class:"ranking-list"},Gs={class:"ranking-table"},Cs={class:"rank-cell"},Ds={class:"profit-text"},As={class:"metrics-section"},Bs={class:"reinvest-card"},Fs={class:"reinvest-header"},Ts={class:"reinvest-input-group"},Es={class:"reinvest-preview"},Ls={class:"preview-row"},$s={class:"preview-value"},js={class:"preview-row preview-row--highlight"},qs={class:"preview-label"},Us={class:"preview-value"},Hs={class:"preview-row"},Js={class:"preview-value"},Ks={class:"finance-summary"},Os={class:"summary-grid"},Qs={class:"summary-item"},Ws={class:"summary-value"},Xs={class:"summary-item"},Ys={class:"summary-value cost-text"},Zs={class:"summary-item summary-item--total"},st={class:"summary-value profit-text"},tt={__name:"MetricsView",setup(et){const d=N(),h=p(()=>d.salesByMonth),n=p(()=>d.productSalesRanking),y=p(()=>d.inventoryRotation),i=p(()=>d.financialMetrics),m=P(d.reinvestmentPercent);function w(){d.setReinvestmentPercent(m.value)}function a(c){return new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:0}).format(c)}function R(c){const[t,o]=c.split("-");return new Date(t,o-1).toLocaleDateString("es-AR",{month:"long",year:"numeric"})}const x=p(()=>Math.max(...h.value.map(c=>c.totalSales),1));return(c,t)=>(r(),l("div",z,[t[25]||(t[25]=s("h1",{class:"page-title"},"Métricas y Reportes",-1)),s("div",G,[s("div",C,[s("div",D,[u(v,{name:"money",size:28})]),s("div",A,[s("span",B,e(a(i.value.totalRevenue)),1),t[1]||(t[1]=s("span",{class:"kpi-label"},"Ingresos totales",-1))])]),s("div",F,[s("div",T,[u(v,{name:"trending-up",size:28})]),s("div",E,[s("span",L,e(a(i.value.totalProfit)),1),t[2]||(t[2]=s("span",{class:"kpi-label"},"Ganancia total",-1)),s("span",$,e(i.value.profitMargin)+"% margen",1)])]),s("div",j,[s("div",q,[u(v,{name:"refresh",size:28})]),s("div",U,[s("span",H,e(y.value)+"x",1),t[3]||(t[3]=s("span",{class:"kpi-label"},"Rotación de inventario",-1))])]),s("div",J,[s("div",K,[u(v,{name:"calendar",size:28})]),s("div",O,[s("span",Q,e(a(i.value.monthlyProfit)),1),t[4]||(t[4]=s("span",{class:"kpi-label"},"Ganancia este mes",-1))])])]),s("section",W,[t[5]||(t[5]=s("h2",{class:"section-title"},"Ventas por mes",-1)),s("div",X,[s("div",Y,[(r(!0),l(k,null,b(h.value,o=>(r(),l("div",{key:o.month,class:"bar-item"},[s("div",Z,[s("div",{class:"bar",style:V({height:`${o.totalSales/x.value*100}%`})},[s("span",ss,e(a(o.totalSales)),1)],4)]),s("span",ts,e(R(o.month)),1),s("div",es,[s("span",null,e(o.unitsSold)+" uds",1),s("span",as,"+"+e(a(o.totalProfit)),1)])]))),128))])])]),s("div",ns,[s("section",os,[t[14]||(t[14]=s("h2",{class:"section-title"},"Ranking de productos",-1)),s("div",is,[n.value.top?(r(),l("div",ls,[s("div",rs,[u(v,{name:"trophy",size:16}),t[6]||(t[6]=f(" Más vendido",-1))]),s("div",ds,[n.value.top.productImage?(r(),l("img",{key:0,src:n.value.top.productImage,class:"product-thumb"},null,8,cs)):_("",!0),s("div",us,[s("span",vs,e(n.value.top.productName),1),s("span",ps,e(n.value.top.unitsSold)+" unidades vendidas ",1)])]),s("div",ms,[s("div",_s,[t[7]||(t[7]=s("span",{class:"metric-label"},"Ingresos",-1)),s("span",hs,e(a(n.value.top.totalRevenue)),1)]),s("div",gs,[t[8]||(t[8]=s("span",{class:"metric-label"},"Ganancia",-1)),s("span",ks,e(a(n.value.top.totalProfit)),1)])])])):_("",!0),n.value.bottom&&n.value.all.length>1?(r(),l("div",bs,[s("div",fs,[u(v,{name:"trending-down",size:16}),t[9]||(t[9]=f(" Menos vendido",-1))]),s("div",ys,[n.value.bottom.productImage?(r(),l("img",{key:0,src:n.value.bottom.productImage,class:"product-thumb"},null,8,ws)):_("",!0),s("div",Rs,[s("span",xs,e(n.value.bottom.productName),1),s("span",Ss,e(n.value.bottom.unitsSold)+" unidades vendidas ",1)])]),s("div",Ps,[s("div",Is,[t[10]||(t[10]=s("span",{class:"metric-label"},"Ingresos",-1)),s("span",Ms,e(a(n.value.bottom.totalRevenue)),1)]),s("div",Vs,[t[11]||(t[11]=s("span",{class:"metric-label"},"Ganancia",-1)),s("span",Ns,e(a(n.value.bottom.totalProfit)),1)])])])):_("",!0)]),s("div",zs,[t[13]||(t[13]=s("h3",{class:"list-title"},"Todos los productos",-1)),s("table",Gs,[t[12]||(t[12]=s("thead",null,[s("tr",null,[s("th",null,"#"),s("th",null,"Producto"),s("th",null,"Vendidos"),s("th",null,"Ingresos"),s("th",null,"Ganancia")])],-1)),s("tbody",null,[(r(!0),l(k,null,b(n.value.all,(o,g)=>(r(),l("tr",{key:o.productId},[s("td",Cs,e(g+1),1),s("td",null,e(o.productName),1),s("td",null,e(o.unitsSold),1),s("td",null,e(a(o.totalRevenue)),1),s("td",Ds,e(a(o.totalProfit)),1)]))),128))])])])]),s("section",As,[t[24]||(t[24]=s("h2",{class:"section-title"},"Configuración de reinversión",-1)),s("div",Bs,[s("div",Fs,[t[16]||(t[16]=s("span",{class:"reinvest-label"},"% de ganancia a reinvertir",-1)),s("div",Ts,[I(s("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=o=>m.value=o),min:"0",max:"100",class:"reinvest-input",onChange:w},null,544),[[M,m.value,void 0,{number:!0}]]),t[15]||(t[15]=s("span",{class:"reinvest-suffix"},"%",-1))])]),s("div",Es,[s("div",Ls,[t[17]||(t[17]=s("span",{class:"preview-label"},"Ganancia mensual",-1)),s("span",$s,e(a(i.value.monthlyProfit)),1)]),s("div",js,[s("span",qs,"A reinvertir ("+e(m.value)+"%)",1),s("span",Us,e(a(i.value.monthlyReinvestment)),1)]),s("div",Hs,[t[18]||(t[18]=s("span",{class:"preview-label"},"Disponible",-1)),s("span",Js,e(a(i.value.monthlyProfit-i.value.monthlyReinvestment)),1)])]),t[19]||(t[19]=s("p",{class:"reinvest-hint"}," Este porcentaje se usa para calcular cuánto deberías reinvertir en stock cada mes. ",-1))]),s("div",Ks,[t[23]||(t[23]=s("h3",{class:"list-title"},"Resumen financiero total",-1)),s("div",Os,[s("div",Qs,[t[20]||(t[20]=s("span",{class:"summary-label"},"Ingresos por ventas",-1)),s("span",Ws,e(a(i.value.totalRevenue)),1)]),s("div",Xs,[t[21]||(t[21]=s("span",{class:"summary-label"},"Costo de productos",-1)),s("span",Ys,"-"+e(a(i.value.totalCost)),1)]),s("div",Zs,[t[22]||(t[22]=s("span",{class:"summary-label"},"Ganancia neta",-1)),s("span",st,e(a(i.value.totalProfit)),1)])])])])])]))}},it=S(tt,[["__scopeId","data-v-495f784e"]]);export{it as default};
